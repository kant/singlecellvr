<html>
  <head>
    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <script src="https://rawgit.com/protyze/aframe-curve-component/master/dist/aframe-curve-component.min.js"></script>
    <script src="https://rawgit.com/blairmacintyre/aframe-look-at-billboard-component/master/dist/aframe-look-at-billboard-component.min.js"></script>
    <script>
      AFRAME.registerComponent('toggle-rotation', {
        schema: {
          enabled: {default: 'true'}
        },

        init: function () {
          let data = this.data;
          let el = this.el;

          el.addEventListener('mouseenter', () => {
            console.log("hi");
            const drawContainer = document.getElementById("drawContainer");
            drawContainer.setAttribute("animation", "enabled", data.enabled);
            el.setAttribute('enabled', data.enabled); 
          });
        }
      });
    </script>
  </head>
  <body>
    <a-scene id="test">
        <!-- TODO: Change positioning such that hud and main content cannot overlap -->
        <a-entity id="rig">
            <a-entity camera look-controls wasd-controls id="curve-camera">
                <a-entity geometry="primitive: plane; width: .022; height: .022;" material="color: black; opacity: .9;" position="-0.06 .023 -0.04">
                  <a-entity id="hudMapContainer">
                      <a-entity scale=".001 .001 .001" id="curve-map">

                      </a-entity>
                      <a-entity scale=".001 .001 .001" id="draw-map">

                      </a-entity>
                  </a-entity>
                </a-entity>
                <a-entity id="cursor" 
                          raycaster="near: 0; far: infinity;"
                          cursor
                          position="0 0 -1"
                          geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03" material="color: black; shader: flat">
                </a-entity>
            </a-entity>
        </a-entity>
        
        <a-entity id="drawContainer" animation="enabled: false; property: rotation; dir: reverse; easing: linear; to: 0 360 0; loop: true; dur: 30000">
          <a-entity id="curve-container">

          </a-entity>
          <a-entity id="curve-draw">
  
          </a-entity>
          <a-entity id="cells"></a-entity>
        </a-entity>
      
        <a-box id="menu" geometry="primitive: plane; width:20; height: 20;" position="20 0 0" color="gray" opacity=".9"
                  billboard>
            <a-entity geometry="primitive: plane; width: 19; height: 1"
                      toggle-rotation="enabled: true;"
                      text="align: left; value: Pause Rotation; color: red; width: 10;" id="pauseGlobalRotation"></a-entity>
        </a-box>
    </a-scene>
    <script src="./index.js"></script>
  </body>
</html>
