<html>
  <head>
    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <script src="https://rawgit.com/protyze/aframe-curve-component/master/dist/aframe-curve-component.min.js"></script>
    <script src="https://rawgit.com/blairmacintyre/aframe-look-at-billboard-component/master/dist/aframe-look-at-billboard-component.min.js"></script>
    <script src="https://rawgit.com/rdub80/aframe-gui/master/dist/aframe-gui.min.js"></script>
    <script>
      AFRAME.registerComponent('toggle-rotation', {
        schema: {
          enabled: {default: 'true'}
        },

        init: function () {
          let data = this.data;
          let el = this.el;

          el.addEventListener('mouseenter', () => {
            console.log("hi");
            const drawContainer = document.getElementById("drawContainer");
            drawContainer.setAttribute("animation", "enabled", data.enabled);
            el.setAttribute('enabled', data.enabled); 
          });
        }
      });
    </script>
  </head>
  <body>
    <a-scene id="test">
        <!-- TODO: Change positioning such that hud and main content cannot overlap -->
        <a-entity id="rig">
            <a-entity camera look-controls wasd-controls id="curve-camera">
                <a-entity geometry="primitive: plane; width: .022; height: .022;" material="color: black; opacity: .9;" position="-0.06 .023 -0.04">
                  <a-entity id="hudMapContainer">
                      <a-entity scale=".001 .001 .001" id="curve-map">

                      </a-entity>
                      <a-entity scale=".001 .001 .001" id="draw-map">

                      </a-entity>
                  </a-entity>
                </a-entity>
                <a-gui-cursor id="cursor"
                      raycaster="objects: [gui-interactable]"
                      fuse="true" fuse-timeout="2000"
                      design="ring"
                >
                </a-gui-cursor>
            </a-entity>
        </a-entity>
        
        <a-entity id="drawContainer" animation="enabled: false; property: rotation; dir: reverse; easing: linear; to: 0 360 0; loop: true; dur: 30000">
          <a-entity id="curve-container">

          </a-entity>
          <a-entity id="curve-draw">
  
          </a-entity>
          <a-entity id="cells"></a-entity>
        </a-entity>
      
        <a-gui-flex-container 
          flex-direction="column" justify-content="center" align-items="normal" component-padding="0.1" opacity="0.7" width="3.5" height="4.5"
          position="20 0 0" rotation="0 0 0" billboard>
          <a-gui-button 
            id="pauseGlobalRotation"
            width="2.5" height="0.75"
            onclick="startRotation"
            value="Toggle Rotation"
            font-family="Arial"
            margin="0 0 0.05 0">
          </a-gui-button>
        </a-gui-flex-container>
    </a-scene>
    <script src="./index.js"></script>
  </body>
</html>
